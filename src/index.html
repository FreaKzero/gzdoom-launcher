<!DOCTYPE html>
<html lang="en" >
    <head>
        <title>gzDoom Launcher</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic'>
        <link rel="stylesheet" href="app/lib/angular-material/angular-material.css"/>
        <link href="app/lib/mdi/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css" />
    </head>
    <body ng-app="gzdoom-launcher" layout="column" ng-controller="appController">
        
        <md-toolbar layout="row">
        <div class="md-toolbar-tools">
            <h1>gzDoom Launcher</h1>
        </div>

        <md-button ng-click="showSettings($event)"><i class="mdi mdi-settings" style="font-size: 35px; margin-top: 8px;"></i></md-button>
        </md-toolbar>
        
        <div layout="row" ng-controller="modController">
            <div flex>
                <md-content layout-padding style="height: 570px;">
                <md-input-container>
                <label>Search</label>
                <input ng-model="searchterm">
                </md-input-container>
                
                <md-list>
                <md-list-item class="md-2-line" ng-repeat="mod in mods | filter:searchterm">
                <div class="md-list-item-text">
                    <h3>{{ mod.name }}</h3>
                    <p>{{ mod.dir }}</p>
                </div>
                
                <md-checkbox aria-label="select" class="md-secondary" ng-model="mod.checked" ng-click="checked(mod)" ></md-checkbox>
                </md-list-item>
                </md-list>
                </md-content>
            </div>
            <div flex>
                <md-content layout-padding style="height: 570px;">
                <md-list>
                <md-list-item class="md-2-line" ng-repeat="mod in selected">
                <div class="md-list-item-text">
                    <h3>{{ mod.name }}</h3>
                    <p>{{ mod.dir }}</p>
                </div>
                <div class="md-secondary">
                    <p ng-click="moveUp($index)"><i class="mdi mdi-chevron-up btn-sort"></i></p>
                    <p ng-click="moveDown($index)"><i class="mdi mdi-chevron-down btn-sort"></i></p>
                </div>
                
                </md-list-item>
                </md-list>
                </md-content>
            </div>
        </div>


        <div class="lock-size" layout="row" layout-align="end end">        
            <md-button aria-label="play" class="md-fab" ng-click="showGameSelection()">
                <i class="mdi mdi-play" style="font-size: 30px; margin-top: 13px;"></i>
            </md-button>            
        </div>
        

        
        <style>    
        *:focus {
            outline:none;
        }    

        .disabled {
            opacity: 0.3;
            cursor: default !important;
        }

        .btn-sort {            
            cursor: pointer;
            color: white;
            border-radius: 100%;
            padding: 3px;
            transition: all 0.3s ease-out;
        }

        .btn-sort:hover {
            background-color: rgba(158, 158, 158, 0.4);
        }

        md-bottom-sheet .md-subheader .md-subheader-inner {
            padding: 0 !important;
            color: black;
        }   
             
        md-list md-list-item {
            transition: all 0.3s ease-out;
        }

        md-list md-list-item:hover {            
            background-color: rgba(158, 158, 158, 0.2);
        }

        </style>
        <script src="app/lib/underscore/underscore.js"></script>
        <script src="app/_mixins.js"></script>
        <script src="app/lib/angular/angular.js"></script>
        <script src="app/lib/angular-animate/angular-animate.js"></script>
        <script src="app/lib/angular-aria/angular-aria.js"></script>
        <script type="text/javascript" src="app/lib/angular-material/angular-material.js"></script>
        <script type="text/javascript">
        var fs = require('fs');
        var app = angular.module('gzdoom-launcher', ['ngMaterial']);
        
        app.config(function($mdThemingProvider) {
           $mdThemingProvider.theme('default')
    .primaryPalette('blue-grey', {
      'default': '400', // by default use shade 400 from the pink palette for primary intentions
      'hue-1': '100', // use shade 100 for the <code>md-hue-1</code> class
      'hue-2': '600', // use shade 600 for the <code>md-hue-2</code> class
      'hue-3': 'A100' // use shade A100 for the <code>md-hue-3</code> class
    })
    // If you specify less than all of the keys, it will inherit from the
    // default shades
    .accentPalette('deep-orange').dark();
        });
    
        app.run(function ($rootScope, $http) {        
            $rootScope.config = JSON.parse(fs.readFileSync('config.json', "utf8"));
            var iwads = fs.readdirSync($rootScope.config.iwadpath);
            $rootScope.iwads = iwads.map(function(item) {
                var n = item.split('.')[0];
                return {
                    file: item,
                    name: n,
                    cover: 'app/covers/'+n.toLowerCase()+'.jpg'
                };
            });

            
            console.log($rootScope.iwads);
        });
        </script>
        <script src="app/appController.js"></script>
        <script src="app/mods/modService.js"></script>
        <script src="app/mods/modController.js"></script>
        <script src="app/mods/fabController.js"></script>
        
        
    </body>
</html>